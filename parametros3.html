<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Ejemplo de pasando parámetros a través de JavaScript</title>
  </head>
  <body>
    <h1 id="mensaje"></h1>

    <script>
      // Leer el archivo "usuarios.txt" mediante una petición HTTP GET
      var xhr = new XMLHttpRequest();
      xhr.open('GET', 'usuarios.txt', true);
      xhr.onload = function() {
        // Si la petición fue exitosa, procesar el contenido del archivo
        if (xhr.status >= 200 && xhr.status < 400) {
          // Convertir el contenido del archivo en un array de líneas
          var lineas = xhr.responseText.trim().split('\n');
          // Crear un objeto para almacenar los nombres de usuario
          var usuarios = {};
          // Recorrer cada línea del archivo y agregar el nombre de usuario al objeto
          for (var i = 0; i < lineas.length; i++) {
            var nombreMensaje = lineas[i].split(':');
            usuarios[nombreMensaje[0]] = true;
          }
          // Obtener el parámetro 'nombre' de la URL
          var parametros = new URLSearchParams(window.location.search);
          var nombreUsuario = parametros.get('nombre');
          console.log(nombreUsuario); // imprimir el valor de nombreUsuario en la consola
          // Verificar si el nombre de usuario existe en la lista de usuarios
          if (usuarios[nombreUsuario]) {
            document.getElementById('mensaje').textContent = nombreUsuario;
          } else {
            window.location.replace('https://www.youtube.com/');
          }
        }
      };
      xhr.send();
      console.log(xhr.responseText); // imprimir la respuesta del servidor en la consola
    </script>
  </body>
</html>
